<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DashTescam LIVE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; }
        #gauge-canvas { border-radius: 50%; }
    </style>
</head>
<body class="p-5 flex flex-col items-center justify-center min-h-screen">

    <h1 class="text-3xl font-black mb-2 text-red-600">DASH TESCAM</h1>
    <p class="text-gray-400 mb-10 text-center">Tik op het grote vak om een Tesla clip te laden.</p>

    <div id="dropzone" onclick="document.getElementById('fileIn').click()" 
         class="w-full max-w-md aspect-video border-4 border-dashed border-gray-800 rounded-3xl flex items-center justify-center cursor-pointer hover:border-red-600 transition-all">
        <span class="text-6xl text-gray-800">+</span>
    </div>

    <input type="file" id="fileIn" class="hidden" accept="video/*">

    <div id="preview" class="hidden mt-10 w-full max-w-md relative">
        <video id="vid" controls class="w-full rounded-xl shadow-2xl border border-gray-700"></video>
        <canvas id="gauge-canvas" width="200" height="200" 
                class="absolute bottom-2 left-2 w-24 h-24 pointer-events-none"></canvas>
        
        <div class="mt-5 p-4 bg-gray-900 rounded-xl">
            <input type="range" id="speed" min="0" max="150" value="0" class="w-full accent-red-600">
            <p id="kmh" class="text-center font-bold text-xl mt-2">0 KM/H</p>
        </div>
        <button onclick="location.reload()" class="w-full mt-5 text-gray-500 underline text-sm">Andere video kiezen</button>
    </div>

    <script>
        const fileIn = document.getElementById('fileIn');
        const vid = document.getElementById('vid');
        const dropzone = document.getElementById('dropzone');
        const preview = document.getElementById('preview');
        const canvas = document.getElementById('gauge-canvas');
        const ctx = canvas.getContext('2d');

        // Teken functie voor de meter
        function draw(s) {
            ctx.clearRect(0, 0, 200, 200);
            ctx.beginPath();
            ctx.arc(100, 100, 80, 0, 2 * Math.PI);
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.lineWidth = 10;
            ctx.stroke();

            ctx.beginPath();
            ctx.arc(100, 100, 80, -0.5*Math.PI, (-0.5*Math.PI) + (s/150)*2*Math.PI);
            ctx.strokeStyle = '#E82127';
            ctx.lineWidth = 12;
            ctx.stroke();

            ctx.fillStyle = 'white';
            ctx.font = 'bold 50px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(Math.round(s), 100, 115);
        }

        fileIn.onchange = (e) => {
            const file = e.target.files[0];
            if (file) {
                vid.src = URL.createObjectURL(file);
                dropzone.classList.add('hidden');
                preview.classList.remove('hidden');
                draw(0);
                vid.play();
            }
        };

        document.getElementById('speed').oninput = (e) => {
            const val = e.target.value;
            document.getElementById('kmh').innerText = val + " KM/H";
            draw(val);
        };
    </script>
</body>
</html>

