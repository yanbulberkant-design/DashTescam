// ... (bestaande code van de upload actie) ...

        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                videoPreview.src = url;
                
                uploadZone.classList.add('hidden');
                headerText.classList.add('hidden');
                previewContainer.classList.remove('hidden');
                
                videoPreview.play();
                drawGauge(0);
            }
        });

        // HIER KOMT DE NIEUWE CODE:
        videoPreview.ontimeupdate = () => {
            const tracks = videoPreview.textTracks;
            if (tracks && tracks.length > 0) {
                tracks[0].mode = 'hidden'; 
                const activeCues = tracks[0].activeCues;
                if (activeCues && activeCues.length > 0) {
                    const dataString = activeCues[0].text;
                    // We zoeken naar KM/H of speed in de metadata
                    const speedMatch = dataString.match(/(\d+)\s*km\/h/i) || dataString.match(/speed":\s*(\d+)/);
                    if (speedMatch) {
                        const currentSpeed = speedMatch[1];
                        speedDisplay.innerText = currentSpeed + " KM/H";
                        drawGauge(currentSpeed);
                    }
                }
            }
        };

        speedTest.addEventListener('input', (e) => {
            const val = e.target.value;
            speedDisplay.innerText = val + " KM/H";
            drawGauge(val);
        });
// </script> (zorg dat dit eronder staat)
